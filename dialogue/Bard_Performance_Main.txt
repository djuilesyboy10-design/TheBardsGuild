# Bard Performance Dialogue Topics
# Main topic: "Perform for the patrons"

# Main dialogue topic for all publican/innkeeper NPCs
Topic "Perform for the patrons"
  "The crowd looks interested. What type of performance will you give?"
  Choice "Brilliant Performance" "Brilliant Performance"
  Choice "Good Performance" "Good Performance"  
  Choice "Mediocre Performance" "Mediocre Performance"
  Choice "Poor Performance" "Poor Performance"
  Choice "Disastrous Performance" "Disastrous Performance"
  "Maybe another time."
  Close

# Condition: Only show if NPC is publican class and has audience
Condition Function BardPerformance_CheckAudience
  return (npc.class.name == "Publican" or npc.class.name == "Innkeeper") and BardPerformance_GetAudienceCount() > 0

# Function to check audience count
Function BardPerformance_GetAudienceCount
  # This will call our Lua performance system
  return BardPerformance_GetAudienceSize()

# Result if no audience
Topic "Perform for the patrons"
  "There's no one here to perform for right now."
  Close
  Condition Function BardPerformance_NoAudience
  return BardPerformance_GetAudienceCount() == 0
